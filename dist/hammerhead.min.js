/*! hammerhead 13-05-2014 */
var Hammerhead={};!function(a){var b={add:function(a){return c(this.x+a.x,this.y+a.y)},subtract:function(a){return c(this.x-a.x,this.y-a.y)},multiply:function(a){return c(this.x*a,this.y*a)},transform:function(a){return c(this.x*a.a+a.e,this.y*a.d+a.f)},scaleTransform:function(a){return c(this.x*a.a,this.y*a.d)}},c=function(a,c){var d,e;void 0===c?void 0!==a.x?(e=a.y,d=a.x):void 0!==a.pageX?(e=a.pageY,d=a.pageX):void 0!==a.deltaX&&(e=a.deltaY,d=a.deltaX):(d=a,e=c);var f=Object.create(b);return f.x=d,f.y=e,f};a.Point=c}(Hammerhead),function(a){var b={x0:function(){return this.getMinimal().x},y0:function(){return this.getMinimal().y},x1:function(){return this.getMaximal().x},y1:function(){return this.getMaximal().y},dX:function(){return this.x1()-this.x0()},dY:function(){return this.y1()-this.y0()},xMid:function(){return.5*(this.x0()+this.x1())},yMid:function(){return.5*(this.y0()+this.y1())},center:function(){return this.getMinimal().add(this.getMaximal()).multiply(.5)},extent:function(){return this.getMaximal().subtract(this.getMinimal())},toString:function(){return[this.x0(),this.y0(),this.dX(),this.dY()].join(" ")},translate:function(a){var b=this.getMinimal().subtract(a),d=this.getMaximal().subtract(a),e=c(b,d,this.getValidator());return e.valid()?e:null},scale:function(a,b){var d=1/a;b=b||this.center();var e=this.getMinimal().subtract(b).multiply(d).add(b),f=this.getMaximal().subtract(b).multiply(d).add(b),g=c(e,f,this.getValidator());return g.valid()?g:null}},c=function(a,c,e){if(e=e||function(){return!0},"string"==typeof a)return d(a,c);var f=Object.create(b);return f.getMinimal=function(){return a},f.getMaximal=function(){return c},f.setMinimal=function(b){a=b},f.setMaximal=function(a){c=a},f.getValidator=function(){return e},f.valid=function(){return e.call(f)},f},d=function(b,d){var e=function(a){return parseInt(a,10)},f=b.split(" ").map(e),g=a.Point(f[0],f[1]),h=a.Point(f[2],f[3]),i=g.add(h);return c(g,i,d)};a.ViewBox=c}(Hammerhead),function(a){var b={},c={throttleDelay:300,centerScale:4,maxZoom:4},d=function(d,e){function f(a){d.setAttribute("viewBox",a)}function g(a){return n=o.translate(a)||n,f(n.toString()),this}function h(a){var b=a.scaleTransform(d.getScreenCTM().inverse());return this.translate(b)}function i(a,b){return n=o.scale(a,b)||n,f(n.toString()),this}function j(a,b){var c=b.transform(d.getScreenCTM().inverse());return this.scale(a,c)}function k(){return o=n,this}function l(a,b){return a&&b?(n.setMinimal(a),n.setMaximal(b)):n=p,f(n.toString()),this}function m(a,b){b=b||e.centerScale;var c=p.extent().multiply(1/(2*b));return n.setMinimal(a.subtract(c)),n.setMaximal(a.add(c)),f(n.toString()),this}var n,o,p;c.conditions=function(){var a=p.getMaximal(),b=p.getMinimal(),c=this.dX()>=p.dX()/e.maxZoom,d=this.x0()>=b.x&&this.x1()<=a.x,f=this.y0()>=b.y&&this.y1()<=a.y;return c&&d&&f},e=_.extend({},c,e),p=n=o=a.ViewBox(d.getAttribute("viewBox"),e.conditions),f=_.throttle(f,e.throttleDelay),instanceFunctions={translate:g,drag:h,scale:i,zoom:j,fix:k,home:l,goTo:m};var q=Object.create(b);return _.each(instanceFunctions,function(a,b){q[b]=a}),q};a.MobileSVG=d}(Hammerhead);var Hammerhead=function(a){function b(a){var b=document.getElementById(a);if(b&&"svg"===b.tagName.toLowerCase())return b;throw"Id: "+a+" is not a SVG element"}function c(a,b){return this.element.drag(k(a,b)),this}function d(a){return this.drag(a||this.options.dragX,0)}function e(a){return this.drag(0,a||this.options.dragX)}function f(a){return this.element.scale(a),this}function g(a){return this.zoom(a||this.options.zoomIn)}function h(a){return this.zoom(1/a||this.options.zoomOut)}function i(){return this.element.fix(),this}function j(a,c){function d(a){a.gesture.preventDefault(),c.prefix(),a.target.ownerSVGElement===h&&f()}function e(){i.fix(),g(j),c.postfix()}function f(){j.on(o,p),j.on("release",e)}function g(){j.off(o,p),j.off("release",e)}c=_.extend({},m,c);var h=b(a),i=Hammerhead.MobileSVG(h,c),j=Hammer(document).on("touch",d),n={dragstart:function(){i.fix()},drag:function(a){i.drag(k(a))},transformstart:function(){i.fix()},pinch:function(a){i.zoom(a.scale,k(a.center))}},o=_.keys(n).join(" "),p=function(a){var b=a.gesture;b.preventDefault(),n[a.type](b)},q=Object.create(l);return q.element=i,q.options=c,q._test={hammertime:j,handlers:n},q}var k=Hammerhead.Point,l={drag:c,dragX:d,dragY:e,zoom:f,zoomIn:g,zoomOut:h,fix:i},m={dragX:100,dragY:100,zoomIn:1.25,zoomOut:.8,prefix:function(){},postfix:function(){}};return _.extend(j,a)}(Hammerhead);!function(a){function b(a){return a.wheelDelta?a.wheelDelta:40*-a.detail}function c(a){function c(c){if(c.target.ownerSVGElement){var d=b(c),e=Math.pow(2,d/720);console.log(e),a.zoomIn(e),a.fix()}}document.addEventListener("mousewheel",c,!1),document.addEventListener("DOMMouseScroll",c,!1)}a.MouseWheel=c}(Hammerhead);