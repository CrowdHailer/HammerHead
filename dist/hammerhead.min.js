/*! hammerhead 28-04-2014 */
function Point(a,b){this.x=a,this.y=b}function viewFrame(a,b){var c={origin:a,size:b};this.dX=function(){return b.x},this.dY=function(){return b.y},this.x0=function(){return a.x},this.y0=function(){return a.y},this.toString=function(){return[this.x0(),this.y0(),this.dX(),this.dY()].join(" ")},this.translate=function(c){return new viewFrame(a.add(c),b)},this.scale=function(c,d){return newOrigin=a.subtract(c).multiply(d).add(c),newSize=b.multiply(d),new viewFrame(newOrigin,newSize)},this.home=function(d){var e=d||c;a=e.origin,b=e.size},this.anchor={translate:function(b){a=a.add(b)},scale:function(c,d){a=a.subtract(c).multiply(d).add(c),b=b.multiply(d)}}}Point.prototype={constructor:Point,add:function(a){return new Point(this.x+a.x,this.y+a.y)},subtract:function(a){return new Point(this.x-a.x,this.y-a.y)},multiply:function(a){return new Point(this.x*a,this.y*a)},mapTo:function(a){var b=a.getScreenCTM().inverse();return this.transform(b)},transform:function(a){var b=this.x,c=this.y;return new Point(b*a.a+a.e,c*a.d+a.f)},scaleTransform:function(a){return new Point(this.x*a.a,this.y*a.d)},scaleTo:function(a){var b=a.getScreenCTM().inverse();return this.scaleTransform(b)}},function(){function a(a){return a&&"svg"==a.tagName.toLowerCase()}function b(b){var c=document.getElementById(b);if(a(c))return c;throw"Id: "+b+" is not a SVG element"}function c(a){return parseInt(a,10)}function d(a){var b=a.getAttribute("viewBox");if(!b)throw"Id: "+a.id+" has no viewBox attribute";var d=b.split(" ").map(c),e=new Point(d[0],d[1]),f=new Point(d[2],d[3]);return new viewFrame(e,f)}Viewer=function(a){function c(a){a.on("drag",dragHandler),a.on("dragstart",dragstartHandler),a.on("dragend",dragendHandler),a.on("pinch",pinchHandler),a.on("transformend",transformendHandler),a.on("release",g)}function e(a){a.off("drag",dragHandler),a.off("dragstart",dragstartHandler),a.off("dragend",dragendHandler),a.off("pinch",pinchHandler),a.off("transformend",transformendHandler),a.off("release",g)}function f(a){a.target.ownerSVGElement===h&&c(j)}function g(){e(j)}var h=b(a),i=d(h),j=Hammer(document,{preventDefault:!0}).on("touch",f);drag=function(a,b){var c=new Point(a,b),d=c.scaleTo(h).multiply(-1),e=i.translate(d).toString();h.setAttribute("viewBox",e)},fixedDrag=function(a,b){var c=new Point(a,b),d=c.scaleTo(h).multiply(-1);i.anchor.translate(d);var e=i.toString();h.setAttribute("viewBox",e)},zoom=function(a,b,c){var d=new Point(a,b),e=d.mapTo(h),f=1/c,g=i.scale(e,f).toString();h.setAttribute("viewBox",g)},fixedZoom=function(a,b,c){var d=new Point(a,b),e=d.mapTo(h),f=1/c;i.anchor.scale(e,f);var g=i.toString();h.setAttribute("viewBox",g)},dragHandler=function(a){a.gesture.preventDefault(),drag(a.gesture.deltaX,a.gesture.deltaY)},dragendHandler=function(a){a.gesture.preventDefault(),fixedDrag(a.gesture.deltaX,a.gesture.deltaY)},dragstartHandler=function(a){a.gesture.preventDefault()},pinchHandler=function(a){zoom(a.gesture.center.pageX,a.gesture.center.pageY,a.gesture.scale)},transformendHandler=function(a){fixedZoom(a.gesture.center.pageX,a.gesture.center.pageY,a.gesture.scale)},this.drag=drag,this.zoom=zoom,this._test={hammertime:j}}}();